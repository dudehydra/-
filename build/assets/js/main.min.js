"use strict";var side={status:!1,toggle:$(".side__toggle"),side:$(".side"),content:$(".side__content"),panel:null,hide:function(){side.side.removeClass("open"),setTimeout(function(){side.status=!1,side.side.removeClass("left right"),$(side.panel).removeClass("show")},400)},show:function(){side.status=!0,side.side.addClass(side.trigger.data("position")+" open"),side.panel=side.trigger.data("panel"),$(side.panel).addClass("show")},init:function(){side.toggle.click(function(t){side.trigger=$(this),side.status?(side.hide(),side.panel!=side.trigger.data("panel")&&setTimeout(function(){side.show()},400)):side.show()}),$(".side__panel nav a").click(function(t){setTimeout(function(){side.hide()},800)}),side.content.click(function(t){!$(t.target).is(".side__toggle, .side__toggle *")&&side.status&&side.hide()})},resize:function(){side.status&&side.hide()}},anchor=function(t,e){$(t).click(function(){var t=$(this).attr("href"),i=$(t).offset().top;return jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:i},e),!1})},format=function(t,e,i,s){var n,a,o,r,l,c,d;return n="undefined"!=typeof i?i:" ",a="undefined"!=typeof e?e:2,d="undefined"!=typeof s?" "+s:"",o=Math.pow(10,a),r=parseFloat(t),r=Math.round(r*o)/o,l=Number(r).toFixed(a).toString().split("."),c=l[0].replace(/(\d{1,3}(?=(\d{3})+(?:\.\d|\b)))/g,"$1"+n),r=(l[1]?c+"."+l[1]:c)+d},managedMap=function(t){function e(){"object"==typeof ymaps&&s.settings.id&&ymaps.ready(function(){s.map=new ymaps.Map(s.settings.id,{center:s.settings.position,zoom:s.settings.zoom,controls:s.settings.controls,behaviors:s.settings.behaviors});for(var t=0;t<s.settings.marks.length;t++)i(s.settings.marks[t]);s.settings.scaling&&s.settings.marks.length>1&&s.map.setBounds(s.map.geoObjects.getBounds(),s.settings.scalingSettings)})}function i(t){var e=new ymaps.Placemark(t.position,{iconContent:t.icon,balloonContent:t.balloon},t.settings||{});s.map.geoObjects.add(e),s.settings.trigger&&$(s.settings.trigger+t.number).each(function(){var t=$(this);t.click(function(){return t.data("scroll")&&$("html:not(:animated),body:not(:animated)").animate({scrollTop:$("#"+s.settings.id).offset().top},parseInt(t.data("scroll"))),e.balloon.open(),!1})})}var s={settings:{id:t.id||null,zoom:t.zoom||5,position:t.position||[55.76,37.64],controls:t.controls||[],marks:t.marks||null,trigger:t.trigger||null,scaling:t.scaling||null,scalingSettings:t.scalingSettings||{},behaviors:t.behaviors||[]},map:null};return e(),s.field},site={minHeight:function(){$(".membership").css("minHeight",$(window).height()-$("#header").height())},gSliderInit:function(){var t={};t.top=$(".g-slider__carousel-top").owlCarousel({margin:0,nav:!0,responsive:{0:{items:1},600:{items:8},1200:{items:8}}}),t.bottom=$(".g-slider__carousel-bottom").owlCarousel({margin:0,nav:!0,items:1,loop:!0}),t.top.find(".item").each(function(e){$(this).click(function(){t.top.find(".item.active").removeClass("active"),$(this).addClass("active"),t.bottom.trigger("to.owl.carousel",e)})}),t.bottom.on("changed.owl.carousel",function(e){t.top.find(".item.active").removeClass("active"),t.top.find(".item").eq(e.page.index).addClass("active"),t.top.trigger("to.owl.carousel",e.page.index)})},cSliderInit:function(){var t={};t.main=$(".c-slider__carousel-main"),t.main.css("width",$(window).width()+"px"),t.main.owlCarousel({margin:0,items:1,loop:!0}),t.main.css("width","auto"),t.main.find(".arrows .left").click(function(){t.main.trigger("prev.owl.carousel")}),t.main.find(".arrows .right").click(function(){t.main.trigger("next.owl.carousel")}),t.main.on("changed.owl.carousel",function(e){t.thumbs.find(".item.active").removeClass("active"),t.thumbs.find(".item").eq(e.page.index).addClass("active"),t.thumbs.trigger("to.owl.carousel",e.page.index)}),t.thumbs=$(".c-slider__carousel-thumbs").owlCarousel({margin:0,nav:!0}),t.thumbs.find(".item").each(function(e){$(this).click(function(){t.thumbs.find(".item.active").removeClass("active"),$(this).addClass("active"),t.main.trigger("to.owl.carousel",e)})})},pSliderInit:function(){$(".p-slider").owlCarousel({loop:!0,margin:0,nav:!0,responsive:{0:{items:1},600:{items:1},1e3:{items:3}}})},timer:function(){var t={deadline:"2017-06-30",get:function(t){var e=Date.parse(t)-Date.parse(new Date);return{total:e,days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}},update:function(){var e=t.get(t.deadline);e.total&&($(".timer .days").html(e.days),$(".timer .hours").html(e.hours),$(".timer .minutes").html(e.minutes),$(".timer .seconds").html(e.seconds),setTimeout(function(){t.update()},1e3))}};t.update()},range:function(){$(".range").each(function(){var t,e=$(this),i=e.find(".slider-range"),s=e.data("min"),n=e.data("max"),a=e.data("step"),o=e.find("input");t=function(t){o.val(format(t,a<1?2:0))},i.slider({range:"min",min:s,max:n,step:a,value:o.val().replace(/\s+/g,"")||n,slide:function(e,i){t(i.value),site.calculator.count()}}),o.on("change cut drop input keyup paste",function(){i.slider({value:o.val().replace(/\s+/g,"")})}),t(i.slider("value"))})},calculator:{count:null,init:function(){var t={};t.format=function(t,e,i,s){var n,a,o,r,l;return isNaN(e=Math.abs(e))&&(e=2),void 0==i&&(i=","),void 0==s&&(s="."),n=parseInt(t=(+t||0).toFixed(e))+"",(a=n.length)>3?a%=3:a=0,l=a?n.substr(0,a)+s:"",o=n.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+s),r=e?i+Math.abs(t-n).toFixed(e).replace(/-/,0).slice(2):"",l+o+r},site.calculator.count=function(){var e=parseInt($("#cost").val().replace(/\s+/g,"")),i=parseInt($("#first").val().replace(/\s+/g,"")),s=e-i;s<0&&(s=0);var n=parseInt($("#credit-sum").html().replace(/\s+/g,""))||0;$("#credit-sum").countTo({from:n,to:Math.round(100*s)/100,speed:500,refreshInterval:100,formatter:function(e,i){return t.format(e,0,"."," ")}});var a=parseFloat($("#rate").val().replace(/\s+/g,"").replace(",",".")),o=parseInt($("#term").val().replace(/\s+/g,""));if(o<=0)c=0;else var r=a/1200,l=r*Math.pow(1+r,o)/(Math.pow(1+r,o)-1),c=l*s;var d=parseInt($("#monthly").html().replace(/\s+/g,""))||0,u=parseInt(Math.round(100*c)/100);$("#monthly").countTo({from:d,to:u,refreshInterval:10,formatter:function(e,i){return t.format(e,0,"."," ")}})},$(".month").maskMoney({thousands:"",decimal:"",allowNegative:!1,allowZero:!0,precision:0,suffix:""}),$(".money").maskMoney({thousands:" ",decimal:"",allowNegative:!1,allowZero:!0,precision:0,suffix:""}),$(".percent").maskMoney({thousands:" ",decimal:".",allowNegative:!1,allowZero:!0,precision:2,suffix:""}),$(".calculator input").on("change cut drop input keyup paste",function(){if("term"==$(this)[0].id&&$(".buttons #term-years li").removeClass("active"),"first"==$(this)[0].id&&$(".buttons #cost-perc li").removeClass("active"),"cost"==$(this)[0].id){var e=parseInt($(".buttons #cost-perc li.active").html());e>0&&$("#first").val(t.format(Math.round(e*parseInt($(this).val().replace(/\s+/g,""))/100),0,""," "))}site.calculator.count()}),$(".buttons li").on("click",function(){var e=parseInt($(this).html());if(e>0){var i=$(this).parent()[0].id;"cost-perc"==i?$("#first").val(t.format(parseInt($("#cost").val().replace(/\s+/g,""))*e/100,0,""," ")):$("#term").val(12*e),$(".buttons #"+i+" li").removeClass("active"),$(this).addClass("active"),site.calculator.count()}}),site.calculator.count()}},owl:function(){site.gSliderInit(),site.cSliderInit(),site.pSliderInit()},init:function(){site.minHeight(),side.init(),site.owl(),site.timer(),site.calculator.init(),site.range(),anchor("a.anchor",800)},resize:function(){site.minHeight(),side.resize()}};$(document).ready(site.init),$(window).resize(site.resize);